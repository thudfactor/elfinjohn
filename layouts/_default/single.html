{{ define "main" }}
{{ $image := .Resources.GetMatch "cover" }}
{{ with $image }} 
  <div class="md:shadow-xl">
    {{ $small := $image.Fill "320x160" }}
    {{ $med := $image.Fill "640x320" }}
    {{ $lg := $image.Fill "1280x640" }}
    {{ $xl := $image.Fill "2560x1280" }}
    <img class="block w-full h-auto" 
      src="{{ $small.RelPermalink }}" 
      srcset="
        {{ $small.RelPermalink }} 320w,
        {{ $med.RelPermalink }} 640w,
        {{ $lg.RelPermalink }} 1280w,
        {{ $xl.RelPermalink }} 2560w,
      "
      alt="{{ $image.Params.alt }}" />
  </div>
{{ end }}
{{ if $image }}
<div class="md:-mt-64 relative">
{{ else }}
<div>
{{ end }}
  <article class="lg:flex bg-white lg:items-start container mx-auto p-10 md:p-20">
    <div class="lg:flex-none lg:w-1/3 bg-gray-100 p-5 border-b-2 -mx-10 -mt-10 mb-10 lg:m-0 lg:border-b-0 lg:border-r-2">
      <h1 class="text-3xl leading-tight font-thin font-display">{{ .Title }}</h1>
      {{ if .PublishDate }}
        <div class="mt-10 mb-2 text-sm italic font-thin text-gray-600">
          {{ $dateTime := .PublishDate.Format "2006-01-02" }}
          {{ $dateFormat := .Site.Params.dateFormat | default "Jan 2, 2006" }}
          <time datetime="{{ $dateTime }}">{{ .PublishDate.Format $dateFormat }}</time>
        </div>
      {{ end }}
      {{ if .Description }}
        <p class="mt-2 text-gray-700 font-normal">{{ .Description }}</p>
      {{ end }}
    </div>
    <div class="lg:flex-none lg:w-2/3 editorial font-serif text-gray-900 font-light lg:pl-10 text-xl xl:text-2xl">
      {{ .Content }}
    </div>
  </article>
</div>
{{ end }}